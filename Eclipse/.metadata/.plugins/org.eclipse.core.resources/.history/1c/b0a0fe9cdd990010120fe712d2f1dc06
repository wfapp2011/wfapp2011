package de.uni_potsdam.hpi.wfapp2011.activiti.Testing;

import static org.junit.Assert.*;

import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import org.activiti.engine.ProcessEngine;
import org.activiti.engine.ProcessEngines;
import org.junit.Test;

import de.uni_potsdam.hpi.wfapp2011.activiti.ProcessAdministration;
import de.uni_potsdam.hpi.wfapp2011.constants.Constants;

public class TestProcessStart {

	@Test
	public void testProcessStart(){
		ProcessAdministration process = new ProcessAdministration();
		GregorianCalendar startCollection = new GregorianCalendar();
		GregorianCalendar deadlineCollection = new GregorianCalendar();
		GregorianCalendar deadlineTopics = new GregorianCalendar();
		GregorianCalendar deadlineVoting = new GregorianCalendar();
		GregorianCalendar deadlineProcess = new GregorianCalendar();
		//System.out.println("Main-Methode: Deadline Collection: "+ process.dateToISO8601(deadlineCollection));
		
		startCollection.add(Calendar.MINUTE, +5);
		deadlineCollection.add(Calendar.MINUTE, +10);
		deadlineTopics.add(Calendar.MINUTE, +15);
		deadlineVoting.add(Calendar.MINUTE, +20);
		deadlineProcess.add(Calendar.MINUTE, +25);
		
	/*	startCollection.setMinutes(startCollection.getMinutes() + 5);
		deadlineCollection.setMinutes(deadlineCollection.getMinutes() + 10);
		deadlineTopics.setMinutes(deadlineTopics.getMinutes()+15);
		deadlineVoting.setMinutes(deadlineVoting.getMinutes()+ 20);
		deadlineProcess.setMinutes(deadlineProcess.getMinutes()+25);*/
		String processInstanceId = process.startProcess("DegreeProjectProcessNew2", startCollection, deadlineCollection, deadlineTopics, deadlineVoting, deadlineProcess);
		String deadlineProposal = (String) ProcessEngines.getProcessEngine("default").getRuntimeService().getVariable(processInstanceId, Constants.DEADLINE_PROPOSAL_COL_INPUT);
		System.out.println(deadlineProposal);
		String expectedResult = process.dateToISO8601(deadlineCollection)
		assertEquals("DateError", expectedResult, deadlineProposal);
		
	}
}
